     {% extends "main_template.html" %}

     {% block sidebar %}
      <!-- Sidebar Menu -->
      <ul class="sidebar-menu">
        <li class="header">菜单</li>
        <!-- Optionally, you can add icons to the links -->
          <li id="list1">
            <a href="/teacher/course/task/"><i class="fa fa-link"></i> <span>课程作业</span></a>
          </li>
          <li id="list2">
            <a href="/teacher/course/resource/"><i class="fa fa-link"></i> <span>课程资源</span></a>
          </li>
          <li id="list3">
            <a href="/teacher/course/message/"><i class="fa fa-link"></i> <span>课程交流</span></a>
          </li>
      </ul>
      <!-- /.sidebar-menu -->
     {% endblock %}
     {% block content %}
     <div class="box box-solid">
            <div class="box-header with-border">
              <i class="fa fa-text-width"></i>

              <h3 class="box-title">课程信息</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <dl class="dl-horizontal">
                <dt>课程名</dt><dd>{{ course.name }}</dd>
                  <dt>课程简介</dt><dd>{{ course.introduction }}</dd>
                  <dt>课程教师</dt><dd>{{ teacher.name }}</dd>
                  <dt>课程起止日期</dt><dd>{{ term.start_date }} - {{ term.end_date }}</dd>
                  <dt>课程所属学期</dt><dd>{{ course.start_date }} - {{ course.end_date }}</dd>
                  <dt>课程类型</dt><dd>
                    {% if course.is_single %}
                        普通课程
                    {% else %}
                        团队课程
                    {% endif %}
              </dd>
              </dl>
            </div>
            <!-- /.box-body -->
          </div>
          <div class="box">
         <div class="box-header">
            <h3 class="box-title">已加入列表</h3>
        </div>
      <div class="box-body table-responsive no-padding">
           <table class="table table-hover">
                <tr>
                  <th>团队序号</th>
                    <th>团队名称</th>
                  <th>团队负责人</th>
                    <th>团队人数</th>
                </tr>
                  {% for coursegroup in coursegroups %}
                    {% ifequal coursegroup.is_allowed 1 %}
                    <tr href="/group/">
                        <td>{{ coursegroup.group.id }}</td>
                        <td>{{ coursegroup.group.name}}</td>
                        <td>{{ coursegroup.group.user.name}}</td>
                        <td>{{ coursegroup.group.max_number }}</td>
                    </tr>
                      {% endifequal %}

                  {% endfor %}

           </table>
       </div>
</div>
          <div class="box">
         <div class="box-header">
            <h3 class="box-title">申请列表</h3>
        </div>
          <div class="box-body table-responsive no-padding">
           <table class="table table-hover">
                <tr>
                  <th>团队序号</th>
                    <th>团队名称</th>
                  <th>团队负责人</th>
                    <th>批准加入课程</th>
                </tr>
                  {% for coursegroup in coursegroups %}
                      {% ifequal coursegroup.is_allowed 0 %}
                    <tr href="/group/">
                        <td>{{ coursegroup.group.id }}</td>
                        <td>{{ coursegroup.group.name}}</td>
                        <td>{{ coursegroup.group.user.name}}</td>
                        <td>
                            <div class="btn-group">
                        <button type="button" style="max-width:100px" value="是" class="btn btn-success" id="{{ coursegroup.id }}">批准</button>
                        <button type="button" style="max-width:100px" value="否" class="btn btn-warning" id="{{ coursegroup.id }}">拒绝</button>
                         </div>
                        </td>
                    </tr>
                      {% endifequal %}
                  {% endfor %}

           </table>
       </div>
</div>
    <script>
    $(function () {
        $("input[type='button'][value='是']").bind('click', function () {
            $.ajax(
                  {
                      url: "/teacher/course/group_accept/",
                      type: "POST",
                      data: {
                          "course_group_id": $(this).attr('id'),
                      },
                      dataType:"json",
                      success: function (data) {
                          if (data == true) {
                              alert("修改并保存成功");

                          } else {
                              alert("修改失败");
                          }
                          history.go(0);
                      },
                      error: function () {
                          alert("连接失败");
                      }
                  });
        });
        });
        $(function () {
        $("input[type='button'][value='否']").bind('click', function () {
            $.ajax(
                  {
                      url: "/teacher/course/group_refuse/",
                      type: "POST",
                      data: {
                          "course_group_id": $(this).attr('id'),
                      },
                      dataType:"json",
                      success: function (data) {
                          if (data == true) {
                              alert("修改并保存成功");
                          } else {
                              alert("修改失败");
                          }
                          history.go(0) ;
                      },
                      error: function () {
                          alert("连接失败");
                      }
                  });
        });
        });
</script>


    {% endblock %}